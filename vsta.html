<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VAST Ads with Google IMA SDK</title>
  <style>
    #videoContainer {
      position: relative;
      width: 640px;
      height: 360px;
      margin: 20px auto;
      background-color: black;
    }
    video {
      width: 100%;
      height: 100%;
    }
    #adContainer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
  </style>
</head>
<body>

<div id="videoContainer">
  <video id="contentVideo" controls preload="auto" poster="">
    <source src="https://storage.googleapis.com/interactive-media-ads/media/big_buck_bunny.mp4" type="video/mp4" />
  </video>
  <div id="adContainer"></div>
</div>

<script src="https://imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
<script>
  // Reference to the video and ad container
  const videoContent = document.getElementById('contentVideo');
  const adContainer = document.getElementById('adContainer');

  let adsLoader;
  let adsManager;
  let adDisplayContainer;
  let isAdPlaying = false;
  let adsInitialized = false;

  // VAST ad tag URL (replace with your ad tag URL)
  const vastAdTagUrl = 'https://impracticalshoulder.com/dKmRF.zddTGsNYvMZ/GCUn/beHm/9Zu/Z/UFlgkPPCTvY/2tNwzoIk3OMRT/kktpN/j/Y/3lM/jdcvywM-C-ZFsTaLWD1Kpsd/DB0Pxb';

  // Initialize the ad display container and setup ads loader
  function initializeAds() {
    if (adsInitialized) return;
    adsInitialized = true;
    // Create the ad display container
    adDisplayContainer = new google.ima.AdDisplayContainer(adContainer, videoContent);
    adDisplayContainer.initialize();

    // Create ads loader
    adsLoader = new google.ima.AdsLoader(adDisplayContainer);

    // Add event listeners
    adsLoader.addEventListener(
      google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
      onAdsManagerLoaded,
      false
    );
    adsLoader.addEventListener(
      google.ima.AdErrorEvent.Type.AD_ERROR,
      onAdError,
      false
    );

    // Request ads
    const adsRequest = new google.ima.AdsRequest();
    adsRequest.adTagUrl = vastAdTagUrl;

    // Specify linear and nonlinear ad slot sizes
    adsRequest.linearAdSlotWidth = 640;
    adsRequest.linearAdSlotHeight = 360;
    adsRequest.nonLinearAdSlotWidth = 640;
    adsRequest.nonLinearAdSlotHeight = 150;

    adsLoader.requestAds(adsRequest);
  }

  // Handle ads manager loaded event
  function onAdsManagerLoaded(adsManagerLoadedEvent) {
    adsManager = adsManagerLoadedEvent.getAdsManager(videoContent);

    // Attach listeners to the ads manager
    adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, onAdError);
    adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, onContentPauseRequested);
    adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, onContentResumeRequested);
    adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED, onAllAdsCompleted);

    try {
      adsManager.init(640, 360, google.ima.ViewMode.NORMAL);
      adsManager.start();
      isAdPlaying = true;
    } catch (adError) {
      console.log('AdsManager could not start: ', adError);
      videoContent.play();
    }
  }

  // Handle ad errors
  function onAdError(adErrorEvent) {
    console.error('Ad error:', adErrorEvent.getError());
    if (adsManager) {
      adsManager.destroy();
    }
    videoContent.play();
  }

  // Pause content for ad
  function onContentPauseRequested() {
    isAdPlaying = true;
    videoContent.pause();
  }

  // Resume content after ad
  function onContentResumeRequested() {
    isAdPlaying = false;
    videoContent.play();
  }

  // Handle when all ads are done
  function onAllAdsCompleted() {
    isAdPlaying = false;
    adsManager.destroy();
  }

  // Initialize ads on user interaction (required on some browsers)
  videoContent.addEventListener('play', () => {
    if (!adsInitialized) {
      initializeAds();
    }
  });

  // Handle video ended to notify ads loader
  videoContent.addEventListener('ended', () => {
    if (adsLoader) {
      adsLoader.contentComplete();
    }
  });
</script>
<<script>
  // fullPageVastAd.js
(function() {
  // Add styles
  const style = document.createElement('style');
  style.textContent = `
    body, html {
      margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background: black;
      display: flex; justify-content: center; align-items: center;
    }
    #adContainer, #videoElement {
      position: fixed; top: 0; left: 0; height: 100%; width: 100%; background: black;
      z-index: 10000;
    }
    #videoElement {
      width: 100%; height: 100%;
    }
    #closeBtn {
      position: fixed;
      top: 20px; right: 20px;
      z-index: 10001;
      background: rgba(255, 255, 255, 0.7);
      color: black;
      border: none;
      font-size: 18px;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 4px;
      user-select: none;
      display: none;
    }
  `;
  document.head.appendChild(style);
  
  // Create containers
  const adContainer = document.createElement('div');
  adContainer.id = 'adContainer';
  document.body.appendChild(adContainer);
  
  const videoElement = document.createElement('video');
  videoElement.id = 'videoElement';
  videoElement.muted = true;
  document.body.appendChild(videoElement);
  
  const closeBtn = document.createElement('button');
  closeBtn.id = 'closeBtn';
  closeBtn.textContent = 'Close';
  document.body.appendChild(closeBtn);
  
  // Load IMA SDK
  const imaScript = document.createElement('script');
  imaScript.src = 'https://imasdk.googleapis.com/js/sdkloader/ima3.js';
  imaScript.async = true;
  
  imaScript.onload = function() {
    let adsManager;
    let closeBtnTimer;
    
    const adDisplayContainer = new google.ima.AdDisplayContainer(adContainer, videoElement);
    const adsLoader = new google.ima.AdsLoader(adDisplayContainer);
    
    function closeAd() {
      if (adsManager) {
        try { adsManager.stop(); } catch (e) {}
      }
      adContainer.style.display = 'none';
      videoElement.style.display = 'none';
      closeBtn.style.display = 'none';
      if (closeBtnTimer) {
        clearTimeout(closeBtnTimer);
      }
      try {
        window.close();
        setTimeout(() => { window.location.href = 'about:blank'; }, 500);
      } catch {
        window.location.href = 'about:blank';
      }
    }
    
    adsLoader.addEventListener(
      google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
      event => {
        adsManager = event.getAdsManager(videoElement);
        adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, onAdError);
        adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, () => {
          // Show close button with 20 seconds delay
          closeBtnTimer = setTimeout(() => {
            closeBtn.style.display = 'block';
          }, 20000);
        });
        adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, closeAd);
        adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED, closeAd);
        try {
          adsManager.init(window.innerWidth, window.innerHeight, google.ima.ViewMode.NORMAL);
          adsManager.start();
        } catch (error) {
          console.error('AdsManager could not start:', error);
          closeAd();
        }
      }
    );
    
    adsLoader.addEventListener(
      google.ima.AdErrorEvent.Type.AD_ERROR,
      event => {
        console.error('Ad error:', event.getError());
        closeAd();
      }
    );
    
    window.addEventListener('load', () => {
      adDisplayContainer.initialize();
      const adsRequest = new google.ima.AdsRequest();
      adsRequest.adTagUrl = 'https://impracticalshoulder.com/ddm.FWzddtGrNlvZZNGJUS/SeNmg9RuqZfU-lnkYPYTLYE2JNVzTIW3wMQTokntPNQjQY/3gM/jzcFyiMgAa';
      adsRequest.linearAdSlotWidth = window.innerWidth;
      adsRequest.linearAdSlotHeight = window.innerHeight;
      adsRequest.nonLinearAdSlotWidth = window.innerWidth;
      adsRequest.nonLinearAdSlotHeight = window.innerHeight / 3;
      adsLoader.requestAds(adsRequest);
      closeBtn.style.display = 'none';
    });
    
    closeBtn.addEventListener('click', closeAd);
  };
  
  document.head.appendChild(imaScript);
})();// fullPageVastAd.js
(function() {
// Add styles
const style = document.createElement('style');
style.textContent = `
body, html {
margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background: black;
display: flex; justify-content: center; align-items: center;
}
#adContainer, #videoElement {
position: fixed; top: 0; left: 0; height: 100%; width: 100%; background: black;
z-index: 10000;
}
#videoElement {
width: 100%; height: 100%;
}
#closeBtn {
position: fixed;
top: 20px; right: 20px;
z-index: 10001;
background: rgba(255, 255, 255, 0.7);
color: black;
border: none;
font-size: 18px;
cursor: pointer;
padding: 8px 12px;
border-radius: 4px;
user-select: none;
display: none;
}
`;
document.head.appendChild(style);

// Create containers
const adContainer = document.createElement('div');
adContainer.id = 'adContainer';
document.body.appendChild(adContainer);

const videoElement = document.createElement('video');
videoElement.id = 'videoElement';
videoElement.muted = true;
document.body.appendChild(videoElement);

const closeBtn = document.createElement('button');
closeBtn.id = 'closeBtn';
closeBtn.textContent = 'Close';
document.body.appendChild(closeBtn);

// Load IMA SDK
const imaScript = document.createElement('script');
imaScript.src = 'https://imasdk.googleapis.com/js/sdkloader/ima3.js';
imaScript.async = true;

imaScript.onload = function() {
let adsManager;
let closeBtnTimer;

const adDisplayContainer = new google.ima.AdDisplayContainer(adContainer, videoElement);
const adsLoader = new google.ima.AdsLoader(adDisplayContainer);

function closeAd() {
if (adsManager) {
try { adsManager.stop(); } catch (e) {}
}
adContainer.style.display = 'none';
videoElement.style.display = 'none';
closeBtn.style.display = 'none';
if (closeBtnTimer) {
clearTimeout(closeBtnTimer);
}
try {
window.close();
setTimeout(() => { window.location.href = 'about:blank'; }, 500);
} catch {
window.location.href = 'about:blank';
}
}

adsLoader.addEventListener(
google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
event => {
adsManager = event.getAdsManager(videoElement);
adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, onAdError);
adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, () => {
// Show close button with 20 seconds delay
closeBtnTimer = setTimeout(() => {
closeBtn.style.display = 'block';
}, 20000);
});
adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, closeAd);
adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED, closeAd);
try {
adsManager.init(window.innerWidth, window.innerHeight, google.ima.ViewMode.NORMAL);
adsManager.start();
} catch (error) {
console.error('AdsManager could not start:', error);
closeAd();
}
}
);

adsLoader.addEventListener(
google.ima.AdErrorEvent.Type.AD_ERROR,
event => {
console.error('Ad error:', event.getError());
closeAd();
}
);

window.addEventListener('load', () => {
adDisplayContainer.initialize();
const adsRequest = new google.ima.AdsRequest();
adsRequest.adTagUrl = 'https://impracticalshoulder.com/ddm.FWzddtGrNlvZZNGJUS/SeNmg9RuqZfU-lnkYPYTLYE2JNVzTIW3wMQTokntPNQjQY/3gM/jzcFyiMgAa';
adsRequest.linearAdSlotWidth = window.innerWidth;
adsRequest.linearAdSlotHeight = window.innerHeight;
adsRequest.nonLinearAdSlotWidth = window.innerWidth;
adsRequest.nonLinearAdSlotHeight = window.innerHeight / 3;
adsLoader.requestAds(adsRequest);
closeBtn.style.display = 'none';
});

closeBtn.addEventListener('click', closeAd);
};

document.head.appendChild(imaScript);
})();
</script>
</body>
</html>